<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Chat28</title>
    <link rel="stylesheet" href="stylesheets/chat-style.css">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/7.0.1/css/all.min.css">

</head>

<body data-theme="light">
    <!-- Drop zone for file uploads -->
    <div class="drop-zone" id="dropZone">
        <i class="fa-solid fa-folder-open"></i>Drop files here to upload
    </div>

    <!-- Top bar -->
    <div class="navbar-top">
        <div class="page-title">Chat28</div>
        <div class="top-controls">
            <button class="profile-btn" onclick="goToProfile()"><i class="fa-solid fa-user"></i> Profile</button>
            <button class="mode-toggle" onclick="toggleMode()"><i class="fa-solid fa-moon"></i> Dark Mode</button>
        </div>
    </div>

    <!-- Layout container -->
    <div class="chat-container">
        <!-- Sidebar -->
        <div class="navbar">
            <div class="logo"><i class="fa-solid fa-comment"></i> Chat28</div>

            <div class="chat-tabs">
                <button class="tab-button active" onclick="switchTab('chats', this)"><i class="fa-solid fa-comments"></i> Chats</button>
                <button class="tab-button" onclick="switchTab('users', this)"><i class="fa-solid fa-users"></i> Users</button>
            </div>

            <div id="chats" class="tab-content">
                <div class="chat-option active" onclick="selectChat(this, 'John Doe', 'Last seen 2 minutes ago')">
                    <div class="chat-info">
                        <div class="chat-name">John Doe</div>
                        <div class="chat-preview">Hey, how's the project going?</div>
                    </div>
                </div>
                <div class="chat-option" onclick="selectChat(this, 'Design Team', '5 members ‚Ä¢ 3 online')">
                    <div class="chat-info">
                        <div class="chat-name"><i class="fa-solid fa-paintbrush"></i> Design Team</div>
                        <div class="chat-preview">Sarah: The mockups look great!</div>
                    </div>
                </div>
                <div class="chat-option" onclick="selectChat(this, 'Project Alpha', '8 members ‚Ä¢ 2 online')">
                    <div class="chat-info">
                        <div class="chat-name"><i class="fa-solid fa-rocket"></i> Project Alpha</div>
                        <div class="chat-preview">Meeting at 3 PM today</div>
                    </div>
                </div>
                <div class="chat-option" onclick="selectChat(this, 'Jane Smith', 'Online')">
                    <div class="chat-info">
                        <div class="chat-name">Jane Smith</div>
                        <div class="chat-preview">Thanks for the files!</div>
                    </div>
                </div>
                <div class="chat-option" onclick="selectChat(this, 'Development Team', '12 members ‚Ä¢ 7 online')">
                    <div class="chat-info">
                        <div class="chat-name"><i class="fa-solid fa-laptop-code"></i> Development Team</div>
                        <div class="chat-preview">Alex: Code review ready</div>
                    </div>
                </div>
            </div>

            <div id="users" class="tab-content" style="display:none;">
                <div class="user-item" onclick="startChat(this, 'John Doe')">
                    <div class="user-info">
                        <div class="user-name">John Doe</div>
                        <div class="user-status online">Online</div>
                    </div>
                </div>
                <div class="user-item" onclick="startChat(this, 'Jane Smith')">
                    <div class="user-info">
                        <div class="user-name">Jane Smith</div>
                        <div class="user-status online">Online</div>
                    </div>
                </div>
                <div class="user-item" onclick="startChat(this, 'Mike Johnson')">
                    <div class="user-info">
                        <div class="user-name">Mike Johnson</div>
                        <div class="user-status away">Away</div>
                    </div>
                </div>
                <div class="user-item" onclick="startChat(this, 'Sarah Wilson')">
                    <div class="user-info">
                        <div class="user-name">Sarah Wilson</div>
                        <div class="user-status online">Online</div>
                    </div>
                </div>
                <div class="user-item" onclick="startChat(this, 'Alex Chen')">
                    <div class="user-info">
                        <div class="user-name">Alex Chen</div>
                        <div class="user-status offline">Offline</div>
                    </div>
                </div>
                <div class="user-item" onclick="startGroupChat('Design Team')">
                    <div class="user-info">
                        <div class="user-name"><i class="fa-solid fa-paintbrush"></i> Design Team</div>
                        <div class="user-status">Group ‚Ä¢ 5 members</div>
                    </div>
                </div>
                <div class="user-item" onclick="startGroupChat('Project Alpha')">
                    <div class="user-info">
                        <div class="user-name"><i class="fa-solid fa-rocket"></i> Project Alpha</div>
                        <div class="user-status">Group ‚Ä¢ 8 members</div>
                    </div>
                </div>
                <div class="user-item" onclick="startGroupChat('Development Team')">
                    <div class="user-info">
                        <div class="user-name"><i class="fa-solid fa-laptop-code"></i> Development Team</div>
                        <div class="user-status">Group ‚Ä¢ 12 members</div>
                    </div>
                </div>
            </div>
        </div>

        <!-- Main chat area -->
        <div class="main-chat">
            <div class="chat-header">
                <div>
                    <div class="chat-title">John Doe</div>
                    <div class="chat-subtitle">Last seen 2 minutes ago</div>
                </div>
                <div class="chat-actions">
                    <button class="action-btn" onclick="toggleChatInfo()"><i class="fa-solid fa-circle-info"></i> Info</button>
                </div>
            </div>

            <div class="message-container" id="messageContainer">
                <div class="message">
                    <div class="message-content">
                        <div class="text">Hey! How's the project going? I wanted to check in and see if you need any
                            help.</div>
                        <div class="message-time">10:30 AM</div>
                    </div>
                </div>

                <div class="my message">
                    <div class="message-content">
                        <div class="text">Hi John! Things are going well. Just working on the frontend right now.</div>
                        <div class="message-time">10:32 AM</div>
                    </div>
                </div>

                <div class="message">
                    <div class="message-content">
                        <div class="text">That's great! Let me send you the latest requirements.</div>
                        <div class="file" onclick="downloadFile('File.pdf')">
                            <div class="file-icon"><i class="fa-solid fa-file-pdf"></i></div>
                            <div class="file-details">
                                <div class="file-name">File.pdf</div>
                                <div class="file-size">2.3 MB</div>
                            </div>
                        </div>
                        <div class="message-time">10:35 AM</div>
                    </div>
                </div>

                <div class="my message">
                    <div class="message-content">
                        <div class="text">Perfect timing! I was just about to ask for those. Thanks!</div>
                        <div class="message-time">10:37 AM</div>
                    </div>
                </div>
            </div>

            <div class="message-input-container">
                <div class="input-wrapper">
                    <textarea class="message-input" id="messageInput" placeholder="Type your message..." rows="1"
                        onkeydown="handleKeyPress(event)" oninput="adjustHeight(this)"></textarea>
                    <div class="input-actions">
                        <input type="file" class="file-input" id="fileInput" multiple
                            onchange="handleFileSelect(event)">
                        <button class="input-btn" onclick="triggerFileInput()" title="Attach file"><i class="fa-solid fa-paperclip"></i></button>
                        <button class="input-btn" onclick="addEmoji()" title="Add emoji"><i class="fa-solid fa-smile"></i></button>
                        <button class="input-btn send-btn" onclick="sendMessage()" title="Send message"><i class="fa-solid fa-paper-plane"></i></button>
                    </div>
                </div>
            </div>
        </div>
    </div>

    <script>
        // File upload functionality
        let dragCounter = 0;

        // Initialize drag and drop
        document.addEventListener('DOMContentLoaded', function () {
            const dropZone = document.getElementById('dropZone');
            const chatContainer = document.querySelector('.chat-container');

            // Drag events
            chatContainer.addEventListener('dragenter', handleDragEnter);
            chatContainer.addEventListener('dragleave', handleDragLeave);
            chatContainer.addEventListener('dragover', handleDragOver);
            chatContainer.addEventListener('drop', handleDrop);
        });

        function handleDragEnter(e) {
            e.preventDefault();
            dragCounter++;
            document.getElementById('dropZone').classList.add('active');
        }

        function handleDragLeave(e) {
            e.preventDefault();
            dragCounter--;
            if (dragCounter === 0) {
                document.getElementById('dropZone').classList.remove('active');
            }
        }

        function handleDragOver(e) {
            e.preventDefault();
        }

        function handleDrop(e) {
            e.preventDefault();
            dragCounter = 0;
            document.getElementById('dropZone').classList.remove('active');

            const files = Array.from(e.dataTransfer.files);
            if (files.length > 0) {
                handleFiles(files);
            }
        }

        function triggerFileInput() {
            document.getElementById('fileInput').click();
        }

        function handleFileSelect(event) {
            const files = Array.from(event.target.files);
            if (files.length > 0) {
                handleFiles(files);
            }
            // Reset input
            event.target.value = '';
        }

        function handleFiles(files) {
            files.forEach(file => {
                displayFileMessage(file);
            });
        }

        function displayFileMessage(file) {
            const messagesContainer = document.getElementById('messageContainer');
            const messageDiv = document.createElement('div');
            messageDiv.className = 'my message';

            const fileIcon = getFileIcon(file.name);
            const fileSize = formatFileSize(file.size);

            messageDiv.innerHTML = `
                <div class="message-content">
                    <div class="text">Uploaded a file:</div>
                    <div class="file" onclick="downloadFile('${file.name}')">
                        <div class="file-icon">${fileIcon}</div>
                        <div class="file-details">
                            <div class="file-name">${file.name}</div>
                            <div class="file-size">${fileSize}</div>
                        </div>
                    </div>
                    <div class="message-time">${new Date().toLocaleTimeString([], { hour: '2-digit', minute: '2-digit' })}</div>
                </div>
            `;

            messagesContainer.appendChild(messageDiv);
            messagesContainer.scrollTop = messagesContainer.scrollHeight;
        }

        function getFileIcon(fileName) {
            const extension = fileName.split('.').pop().toLowerCase();
            const iconMap = {
            'pdf': '<i class="fas fa-file-pdf"></i>',
            'doc': '<i class="fas fa-file-word"></i>',
            'docx': '<i class="fas fa-file-word"></i>',
            'xls': '<i class="fas fa-file-excel"></i>',
            'xlsx': '<i class="fas fa-file-excel"></i>',
            'ppt': '<i class="fas fa-file-powerpoint"></i>',
            'pptx': '<i class="fas fa-file-powerpoint"></i>',
            'jpg': '<i class="fas fa-file-image"></i>',
            'jpeg': '<i class="fas fa-file-image"></i>',
            'png': '<i class="fas fa-file-image"></i>',
            'gif': '<i class="fas fa-file-image"></i>',
            'mp4': '<i class="fas fa-file-video"></i>',
            'avi': '<i class="fas fa-file-video"></i>',
            'mp3': '<i class="fas fa-file-audio"></i>',
            'wav': '<i class="fas fa-file-audio"></i>',
            'zip': '<i class="fas fa-file-archive"></i>',
            'rar': '<i class="fas fa-file-archive"></i>',
            'txt': '<i class="fas fa-file-alt"></i>'
            };
            return iconMap[extension] || '<i class="fas fa-file"></i>';
        }

        function formatFileSize(bytes) {
            if (bytes === 0) return '0 Bytes';
            const k = 1024;
            const sizes = ['Bytes', 'KB', 'MB', 'GB'];
            const i = Math.floor(Math.log(bytes) / Math.log(k));
            return parseFloat((bytes / Math.pow(k, i)).toFixed(2)) + ' ' + sizes[i];
        }

        function downloadFile(fileName) {
            console.log('Downloading file:', fileName);
            // In a real application, this would trigger a file download
            alert(`Downloading ${fileName}...`);
        }

        // Toggle light/dark mode
        function toggleMode() {
            const body = document.body;
            const modeBtn = document.querySelector('.mode-toggle');
            if (body.getAttribute('data-theme') === 'light') {
                body.setAttribute('data-theme', 'dark');
                modeBtn.innerHTML = '<i class="fas fa-sun"></i> Light Mode';
            } else {
                body.setAttribute('data-theme', 'light');
                modeBtn.innerHTML = '<i class="fas fa-moon"></i> Dark Mode';
            }
        }

        // Profile function
        function goToProfile() {
            console.log('Navigating to profile page...');
            // In a real application, this would navigate to the profile page
            alert('Profile page would open here!');
        }

        // Switch between Chats and Users tabs
        function switchTab(tab, btn) {
            // Remove active from all tab buttons
            document.querySelectorAll('.tab-button').forEach(b => b.classList.remove('active'));
            // Add active to clicked button
            btn.classList.add('active');

            // Show/hide corresponding content
            document.getElementById('chats').style.display = tab === 'chats' ? 'block' : 'none';
            document.getElementById('users').style.display = tab === 'users' ? 'block' : 'none';
        }

        // Select a chat
        function selectChat(element, chatName, subtitle) {
            // Remove active from all chat options
            document.querySelectorAll('.chat-option').forEach(option => {
                option.classList.remove('active');
            });
            // Add active to selected chat
            element.classList.add('active');

            // Update chat header
            document.querySelector('.chat-title').textContent = chatName;
            document.querySelector('.chat-subtitle').textContent = subtitle;

            // Load chat messages (in a real app, this would load from server)
            loadChatMessages(chatName);
        }

        // Start a new chat from users tab
        function startChat(element, userName) {
            // Switch to chats tab and update header
            document.querySelector('.chat-title').textContent = userName;
            document.querySelector('.chat-subtitle').textContent = 'Online';

            // Switch to chats tab
            const chatsTab = document.querySelector('.tab-button');
            switchTab('chats', chatsTab);

            // Clear existing active chats and create new one if needed
            document.querySelectorAll('.chat-option').forEach(option => {
                option.classList.remove('active');
            });

            // Load chat messages for this user
            loadChatMessages(userName);
        }

        // Start a group chat
        function startGroupChat(groupName) {
            document.querySelector('.chat-title').textContent = groupName;
            document.querySelector('.chat-subtitle').textContent = 'Group chat';

            // Switch to chats tab
            const chatsTab = document.querySelector('.tab-button');
            switchTab('chats', chatsTab);

            // Load group chat messages
            loadChatMessages(groupName);
        }

        // Load chat messages (placeholder function)
        function loadChatMessages(chatName) {
            const messageContainer = document.getElementById('messageContainer');

            // Sample messages for different chats
            const chatMessages = {
                'John Doe': `
                    <div class="message">
                        <div class="message-content">
                            <div class="text">Hey! How's the project going? I wanted to check in and see if you need any help.</div>
                            <div class="message-time">10:30 AM</div>
                        </div>
                    </div>
                    <div class="my message">
                        <div class="message-content">
                            <div class="text">Hi John! Things are going well. Just working on the frontend right now.</div>
                            <div class="message-time">10:32 AM</div>
                        </div>
                    </div>
                `,
                'Design Team': `
                    <div class="message">
                        <div class="message-content">
                            <div class="text">Sarah: The mockups look great! Ready for review.</div>
                            <div class="message-time">9:15 AM</div>
                        </div>
                    </div>
                    <div class="message">
                        <div class="message-content">
                            <div class="text">Mike: Thanks! I'll take a look and provide feedback by EOD.</div>
                            <div class="message-time">9:20 AM</div>
                        </div>
                    </div>
                    <div class="my message">
                        <div class="message-content">
                            <div class="text">Looks amazing! The color scheme works perfectly.</div>
                            <div class="message-time">9:25 AM</div>
                        </div>
                    </div>
                `,
                'Project Alpha': `
                    <div class="message">
                        <div class="message-content">
                            <div class="text">Team meeting at 3 PM today in Conference Room A</div>
                            <div class="message-time">8:00 AM</div>
                        </div>
                    </div>
                    <div class="my message">
                        <div class="message-content">
                            <div class="text">Got it! I'll prepare the status update.</div>
                            <div class="message-time">8:05 AM</div>
                        </div>
                    </div>
                `
            };

            // Use existing messages or load new ones
            if (chatMessages[chatName]) {
                messageContainer.innerHTML = chatMessages[chatName];
            } else {
                // Default message for new chats
                messageContainer.innerHTML = `
                    <div style="text-align: center; padding: 50px; color: var(--text-secondary);">
                        <div style="font-size: 48px; margin-bottom: 20px;"><i class="fas fa-comment"></i></div>
                        <div style="font-size: 18px; font-weight: 600; margin-bottom: 10px;">Start a conversation</div>
                        <div>Send a message to begin chatting with ${chatName}</div>
                    </div>
                `;
            }

            messageContainer.scrollTop = messageContainer.scrollHeight;
        }

        // Send message
        function sendMessage() {
            const messageInput = document.getElementById('messageInput');
            const text = messageInput.value.trim();

            if (text === '') return;

            const messagesContainer = document.getElementById('messageContainer');
            const messageDiv = document.createElement('div');
            messageDiv.className = 'my message';
            messageDiv.innerHTML = `
                <div class="message-content">
                    <div class="text">${text}</div>
                    <div class="message-time">${new Date().toLocaleTimeString([], { hour: '2-digit', minute: '2-digit' })}</div>
                </div>
            `;

            messagesContainer.appendChild(messageDiv);
            messagesContainer.scrollTop = messagesContainer.scrollHeight;

            messageInput.value = '';
            adjustHeight(messageInput);

            // Simulate a response (in a real app, this would come from the server)
            setTimeout(() => {
                simulateResponse(messagesContainer);
            }, 1000 + Math.random() * 2000);
        }

        // Simulate a response message
        function simulateResponse(container) {
            const responses = [
                "That sounds great!",
                "Thanks for the update!",
                "I agree with that approach.",
                "Let me check on that and get back to you.",
                "Perfect timing!",
                "I'll take care of that right away.",
                "Good point, let's discuss this further.",
                "Understood, thanks for clarifying."
            ];

            const responseDiv = document.createElement('div');
            responseDiv.className = 'message';
            responseDiv.innerHTML = `
                <div class="message-content">
                    <div class="text">${responses[Math.floor(Math.random() * responses.length)]}</div>
                    <div class="message-time">${new Date().toLocaleTimeString([], { hour: '2-digit', minute: '2-digit' })}</div>
                </div>
            `;

            container.appendChild(responseDiv);
            container.scrollTop = container.scrollHeight;
        }

        // Handle enter key
        function handleKeyPress(event) {
            if (event.key === 'Enter' && !event.shiftKey) {
                event.preventDefault();
                sendMessage();
            }
        }

        // Auto-resize textarea
        function adjustHeight(element) {
            element.style.height = 'auto';
            element.style.height = element.scrollHeight + 'px';
        }

        // Toggle chat info
        function toggleChatInfo() {
            console.log('Toggle chat info panel');
            alert('Chat info panel would toggle here!');
        }

        // Add emoji function
        function addEmoji() {
            const messageInput = document.getElementById('messageInput');
            const emojis = ['üòä', 'üòÑ', 'üòç', 'ü§î', 'üëç', 'üëé', '‚ù§Ô∏è', 'üî•', 'üíØ', 'üéâ'];
            const randomEmoji = emojis[Math.floor(Math.random() * emojis.length)];

            messageInput.value += randomEmoji;
            messageInput.focus();
            adjustHeight(messageInput);
        }

        // Initialize the app
        document.addEventListener('DOMContentLoaded', function () {
            // Focus on message input
            document.getElementById('messageInput').focus();

            // Set initial scroll position
            const messageContainer = document.getElementById('messageContainer');
            messageContainer.scrollTop = messageContainer.scrollHeight;
        });
    </script>
</body>

</html>